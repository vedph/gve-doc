# TEI Export Sample - Digits

## Snapshot

Let us start from this mock autograph, where I numbered the operations to make it easier to read its interpretation:

![mock autograph](img/mock-autograph-digits.png)

In our interpretation, we have:

- base text (v0):

```txt
one FIVE six ten three four zero
```

- operations (DSL):

```txt
5+["two "
5x4="Five"
37x4="five"
14x4- [*version^:=alpha]
@8x8<>17x10
29x4>[1@zero
1+[" "@zero [*version^:=beta]
```

These operations can be read as follows:

1. v0>v1: insert `two_` before `FIVE`
2. v1>v2: replace `FIVE` with `Five`
3. v2>v3: replace `Five` with `five`
4. v3>v4: delete `ten_` (staged version "alpha")
5. v4>v5: swap `five six` with `three four`
6. v5>v6: move `zero` before `one`
7. v6>v7: insert space before `one` (staged version "beta")

>Note that the last 2 operations are grouped because they are semantically one, i.e. adding the space is implicit in moving the word so that we avoid stitching words after moving.

## Versions

The generated versions are:

- v1 `one two FIVE six ten three four zero`
- v2 `one two Five six ten three four zero`
- v3 `one two five six ten three four zero`
- v4 `one two five six three four zero` (alpha)
- v5 `one two three four five six zero`
- v6 `zeroone two three four five six`
- v7 `zero one two three four five six` (beta)

The trace features generated by executing the operations are (each character of the referenced text has them):

- at alpha:
  - v0:
    - `$anchor` on `F`IVE (v0:v1)
  - v1:
    - `$seg-out` (v0:v1) for `two_`
    - `$seg-in` (v1:v2) for `FIVE`
  - v2:
    - `$seg-out` (v1:v2) for `Five`
    - `$seg-in` (v2:v3) for `Five`
  - v3:
    - `$seg-out` (v2:v3) for `five`
    - `$seg-in` (v3:v4) for `ten_`
  - v4:
    - `$seg-in` (v4:v5) for `five`

We can summarize these features by wrapping the corresponding text into `{}` for deletions and `[]` for output segments, followed by the target version number:

```txt
one [two ]1{FIVE}2{Five}4[five]5 six {ten }4three four zero
```

### Version Alpha

The alpha version branch is the first child of the root node:

```txt
+ ⯈ [1.1]
 + ⯈ [2.1] #1 →  (sub-id=v4, version=alpha)
  + ⯈ [3.1] one  #2 → #1: one 
   + ⯈ [4.1] two  #3 → #33: two  ($seg-out="c0b3f7a099 v0:v1 1", $seg-out="c0b3f7a099 v0:v1 2", $seg-out="c0b3f7a099 v0:v1 3", $seg-out="c0b3f7a099 v0:v1 4")
    + ⯈ [5.1] FIVE #4 → #5: FIVE ($del="24d9eeb7f5 v1:v2 1", $del="24d9eeb7f5 v1:v2 2", $del="24d9eeb7f5 v1:v2 3", $del="24d9eeb7f5 v1:v2 4")
     + ⯈ [6.1] Five #5 → #37: Five ($del="920c73814c v2:v3 1", $del="920c73814c v2:v3 2", $del="920c73814c v2:v3 3", $del="920c73814c v2:v3 4")
      + ⯈ [7.1] five #6 → #41: five ($seg-in="33ba5c10c2 v4:v5 1", $seg-out="920c73814c v2:v3 1", $seg-in="33ba5c10c2 v4:v5 2", $seg-out="920c73814c v2:v3 2", $seg-in="33ba5c10c2 v4:v5 3", $seg-out="920c73814c v2:v3 3", $seg-in="33ba5c10c2 v4:v5 4", $seg-out="920c73814c v2:v3 4")
       + ⯈ [8.1]  six  #7 → #9:  six  ($seg-in="33ba5c10c2 v4:v5 5", $seg-in="33ba5c10c2 v4:v5 6", $seg-in="33ba5c10c2 v4:v5 7", $seg-in="33ba5c10c2 v4:v5 8")
        + ⯈ [9.1] ten  #8 → #14: ten  ($del="6a8062ba68 v3:v4 1", $del="6a8062ba68 v3:v4 2", $del="6a8062ba68 v3:v4 3", $del="6a8062ba68 v3:v4 4")
         - ■ [10.1] three four zero #9 → #18: three four zero ($seg2-in="33ba5c10c2 v4:v5 1", $seg2-in="33ba5c10c2 v4:v5 2", $seg2-in="33ba5c10c2 v4:v5 3", $seg2-in="33ba5c10c2 v4:v5 4", $seg2-in="33ba5c10c2 v4:v5 5", $seg2-in="33ba5c10c2 v4:v5 6", $seg2-in="33ba5c10c2 v4:v5 7", $seg2-in="33ba5c10c2 v4:v5 8", $seg2-in="33ba5c10c2 v4:v5 9", $seg2-in="33ba5c10c2 v4:v5 10")
...
```

Its corresponding rendition is (this has been manually indented to make its structure more readable):

```xml
<rdg>
  <mod n="v4">
    one 
    <ins source="o637f7d477a">two </ins>
    <subst source="oe166382c8a">
      <del source="oe166382c8a">FIVE</del>
      <subst source="occ3e52155c">
        <del source="occ3e52155c">Five</del>
        <ins source="occ3e52155c">five</ins>
      </subst>
       six 
      <del source="oeb34c1c747">ten </del>
      three four zero
    </subst>
  </mod>
</rdg>
```

### Version Beta

The second branch is version beta:

```txt
+ ⯈ [2.2] #1 →  (sub-id=v7, version=beta)
  + ⯈ [3.1] zero #2 → #29: zero ($seg-in="901fc11cc5 v5:v6 1", $seg-out="901fc11cc5 v5:v6 1", $seg-in="901fc11cc5 v5:v6 2", $seg-out="901fc11cc5 v5:v6 2", $seg-in="901fc11cc5 v5:v6 3", $seg-out="901fc11cc5 v5:v6 3", $seg-in="901fc11cc5 v5:v6 4", $seg-out="901fc11cc5 v5:v6 4")
   + ⯈ [4.1]   #3 → #45:   ($seg-out="0041319539 v6:v7 1")
    + ⯈ [5.1] one  #4 → #1: one  ($anchor="901fc11cc5 v5:v6", $anchor="0041319539 v6:v7")
     + ⯈ [6.1] two  #5 → #33: two  ($seg-out="c0b3f7a099 v0:v1 1", $seg-out="c0b3f7a099 v0:v1 2", $seg-out="c0b3f7a099 v0:v1 3", $seg-out="c0b3f7a099 v0:v1 4")
      + ⯈ [7.1] five six #6 → #41: five six ($del="33ba5c10c2 v4:v5 1", $del="33ba5c10c2 v4:v5 2", $del="33ba5c10c2 v4:v5 3", $del="33ba5c10c2 v4:v5 4", $del="33ba5c10c2 v4:v5 5", $del="33ba5c10c2 v4:v5 6", $del="33ba5c10c2 v4:v5 7", $del="33ba5c10c2 v4:v5 8")
       + ⯈ [8.1] ten  #7 → #14: ten  ($del="6a8062ba68 v3:v4 1", $del="6a8062ba68 v3:v4 2", $del="6a8062ba68 v3:v4 3", $del="6a8062ba68 v3:v4 4")
        + ⯈ [9.1] three four #8 → #18: three four ($seg2-in="33ba5c10c2 v4:v5 1", $seg-out="33ba5c10c2 v4:v5 1", $seg2-in="33ba5c10c2 v4:v5 2", $seg-out="33ba5c10c2 v4:v5 2", $seg2-in="33ba5c10c2 v4:v5 3", $seg-out="33ba5c10c2 v4:v5 3", $seg2-in="33ba5c10c2 v4:v5 4", $seg-out="33ba5c10c2 v4:v5 4", $seg2-in="33ba5c10c2 v4:v5 5", $seg-out="33ba5c10c2 v4:v5 5", $seg2-in="33ba5c10c2 v4:v5 6", $seg-out="33ba5c10c2 v4:v5 6", $seg2-in="33ba5c10c2 v4:v5 7", $seg-out="33ba5c10c2 v4:v5 7", $seg2-in="33ba5c10c2 v4:v5 8", $seg-out="33ba5c10c2 v4:v5 8", $seg2-in="33ba5c10c2 v4:v5 9", $seg-out="33ba5c10c2 v4:v5 9", $seg2-in="33ba5c10c2 v4:v5 10", $seg-out="33ba5c10c2 v4:v5 10")
         + ⯈ [10.1]   #9 → #13:  
          + ⯈ [11.1] three four #10 → #18: three four ($del="33ba5c10c2 v4:v5 1", $del="33ba5c10c2 v4:v5 2", $del="33ba5c10c2 v4:v5 3", $del="33ba5c10c2 v4:v5 4", $del="33ba5c10c2 v4:v5 5", $del="33ba5c10c2 v4:v5 6", $del="33ba5c10c2 v4:v5 7", $del="33ba5c10c2 v4:v5 8", $del="33ba5c10c2 v4:v5 9", $del="33ba5c10c2 v4:v5 10")
           + ⯈ [12.1] FIVE #11 → #5: FIVE ($del="24d9eeb7f5 v1:v2 1", $del="24d9eeb7f5 v1:v2 2", $del="24d9eeb7f5 v1:v2 3", $del="24d9eeb7f5 v1:v2 4")
            + ⯈ [13.1] Five #12 → #37: Five ($del="920c73814c v2:v3 1", $del="920c73814c v2:v3 2", $del="920c73814c v2:v3 3", $del="920c73814c v2:v3 4")
             + ⯈ [14.1] five #13 → #41: five ($seg-out="920c73814c v2:v3 1", $seg-in="33ba5c10c2 v4:v5 1", $seg2-out="33ba5c10c2 v4:v5 1", $seg-out="920c73814c v2:v3 2", $seg-in="33ba5c10c2 v4:v5 2", $seg2-out="33ba5c10c2 v4:v5 2", $seg-out="920c73814c v2:v3 3", $seg-in="33ba5c10c2 v4:v5 3", $seg2-out="33ba5c10c2 v4:v5 3", $seg-out="920c73814c v2:v3 4", $seg-in="33ba5c10c2 v4:v5 4", $seg2-out="33ba5c10c2 v4:v5 4")
              + ⯈ [15.1]  six #14 → #9:  six ($seg-in="33ba5c10c2 v4:v5 5", $seg2-out="33ba5c10c2 v4:v5 5", $seg-in="33ba5c10c2 v4:v5 6", $seg2-out="33ba5c10c2 v4:v5 6", $seg-in="33ba5c10c2 v4:v5 7", $seg2-out="33ba5c10c2 v4:v5 7", $seg-in="33ba5c10c2 v4:v5 8", $seg2-out="33ba5c10c2 v4:v5 8")
               + ⯈ [16.1]   #15 → #28:  
                - ■ [17.1] zero #16 → #29: zero ($del="901fc11cc5 v5:v6 1", $del="901fc11cc5 v5:v6 2", $del="901fc11cc5 v5:v6 3", $del="901fc11cc5 v5:v6 4")
```
